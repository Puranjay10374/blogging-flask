{% extends "base.html" %}

{% block content %}
<div class="container">
    <article class="post">
        <header class="post-header">
            <h1>{{ post.title }}</h1>
            <div class="post-meta">
                <p>By <strong>{{ post.author.username }}</strong> on {{ post.created_at.strftime('%B %d, %Y at %I:%M %p') }}</p>
                {% if post.updated_at > post.created_at %}
                    <p><em>Last updated: {{ post.updated_at.strftime('%B %d, %Y at %I:%M %p') }}</em></p>
                {% endif %}
            </div>
        </header>
        
        <div class="post-content">
            {{ post.content|replace('\n', '<br>')|safe }}
        </div>
        
        {% if current_user == post.author %}
            <div class="post-actions">
                <a href="{{ url_for('blog.edit', id=post.id) }}" class="btn btn-primary">Edit</a>
                <form method="POST" action="{{ url_for('blog.delete', id=post.id) }}" style="display: inline;" 
                      onsubmit="return confirm('Are you sure you want to delete this post?')">
                    <input type="submit" value="Delete" class="btn btn-danger">
                </form>
            </div>
        {% endif %}
    </article>
    
    <div class="post-navigation">
        <a href="{{ url_for('blog.index') }}">&larr; Back to All Posts</a>
    </div>
</div>
{% endblock %}
